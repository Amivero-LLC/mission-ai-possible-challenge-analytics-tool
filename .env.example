# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
# Legend:
#   [BACKEND]  - Required by backend service only
#   [FRONTEND] - Required by frontend service only
#   [BOTH]     - Required by both services
#   [RAILWAY]  - Railway/Railpack deployment specific
# =============================================================================

# -----------------------------------------------------------------------------
# Railway/Railpack Deployment Configuration
# -----------------------------------------------------------------------------
# [RAILWAY] Tells Railpack which configuration file to use
# Set to "railpack-backend.json" for backend service
# Set to "railpack-frontend.json" for frontend service
# RAILPACK_CONFIG_FILE=railpack-backend.json

# [RAILWAY] Identifies which service to start (backend or frontend)
# Set to "backend" for backend service, "frontend" for frontend service
# SERVICE_ROLE=backend

# -----------------------------------------------------------------------------
# Port Configuration
# -----------------------------------------------------------------------------
# [BACKEND] Port for FastAPI/Uvicorn server
# For Railway: use BACKEND_PORT=${PORT} in backend service
# For local: typically 5098 or 8000
BACKEND_PORT=5098

# [FRONTEND] Port for Next.js server
# For Railway: use FRONTEND_PORT=${PORT} in frontend service
# For local: typically 5099 or 3000
FRONTEND_PORT=5099

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# [BACKEND] Database engine type
# Options: sqlite (default for local), postgres (recommended for production)
DB_ENGINE=sqlite

# [BACKEND] PostgreSQL connection settings (required when DB_ENGINE=postgres)
# For Railway Postgres: get these from Railway database service variables
# DB_HOST=postgres
# DB_PORT=5432
# DB_NAME=mission_dashboard
# DB_USER=postgres
# DB_PASSWORD=change_me

# Alternative: [BACKEND] Direct database connection string
# SQLALCHEMY_DATABASE_URI=postgresql://user:pass@host:port/dbname

# -----------------------------------------------------------------------------
# API Endpoint Configuration
# -----------------------------------------------------------------------------
# [FRONTEND] Browser-facing API endpoint (NEXT_PUBLIC_* vars are exposed to browser)
# For Railway: https://<your-backend-service>.up.railway.app
# For local: http://localhost:${BACKEND_PORT}
NEXT_PUBLIC_API_BASE_URL=http://localhost:5098

# [FRONTEND] Server-side API endpoint (for Next.js server components)
# For Railway: same as NEXT_PUBLIC_API_BASE_URL
# For Docker: http://backend:${BACKEND_PORT}
# For local: same as NEXT_PUBLIC_API_BASE_URL
API_BASE_URL=http://backend:5098

# -----------------------------------------------------------------------------
# OpenWebUI Integration
# -----------------------------------------------------------------------------
# [BACKEND] OpenWebUI instance URL
# Get your API key from: Settings -> Account -> API Keys in OpenWebUI
OPEN_WEBUI_HOSTNAME=https://amichat.prod.amivero-solutions.com

# [BACKEND] OpenWebUI API key for fetching chats, models, and users
OPEN_WEBUI_API_KEY=your_api_key_here

# -----------------------------------------------------------------------------
# Mission Data Files (Optional)
# -----------------------------------------------------------------------------
# [BACKEND] Override default mission data file location
# If not set, uses auto-discovery and live OpenWebUI API
# MISSION_DATA_FILE=

# [BACKEND] Override default mission user names file location
# MISSION_USER_NAMES_FILE=

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
# [BOTH] Authentication mode
# Options:
#   DEFAULT - local username/password only
#   HYBRID  - local credentials + Microsoft Office 365 OAuth
#   OAUTH   - Microsoft Office 365 OAuth only
AUTH_MODE=HYBRID

# [BACKEND] Session secret for signing cookies (CHANGE IN PRODUCTION!)
# Generate a secure random string for production deployments
SESSION_SECRET=change_me_secret_value

# [BACKEND] Session cookie security settings
SESSION_COOKIE_SECURE=false
# SESSION_COOKIE_DOMAIN=your.domain.tld
SESSION_COOKIE_SAME_SITE=strict

# [BACKEND] Microsoft Office 365 / Entra ID OAuth configuration
# Required when AUTH_MODE is HYBRID or OAUTH
OAUTH_TENANT_ID=00000000-0000-0000-0000-000000000000
OAUTH_CLIENT_ID=00000000-0000-0000-0000-000000000000
OAUTH_CLIENT_SECRET=replace_me
OAUTH_REDIRECT_URL=http://localhost:5099/auth/oauth/callback
OAUTH_SCOPES=openid profile email offline_access

# [FRONTEND] Frontend awareness of auth mode (automatically set from AUTH_MODE)
NEXT_PUBLIC_AUTH_MODE=${AUTH_MODE}

# -----------------------------------------------------------------------------
# Email Configuration (Optional)
# -----------------------------------------------------------------------------
# [BACKEND] SMTP settings for password reset and verification emails
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASSWORD=
# SMTP_USE_TLS=true

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# [BACKEND] Enable/disable role-based user features
FEATURE_ROLE_USER_ENABLED=false
